# 🎴 炸金花 - 局域网联机游戏

一个基于 WebSocket 的局域网炸金花游戏，支持 2-6 人联机对战。

## 📋 功能特点

- ✅ 局域网联机对战
- ✅ 房间系统（创建/加入房间）
- ✅ 完整的炸金花规则
- ✅ 实时游戏状态同步
- ✅ 现代化的游戏界面
- ✅ 流畅的动画效果

## 🎮 游戏规则

### 基本玩法
- **玩家数量**: 2-6 人
- **初始筹码**: 每人 1000 筹码
- **底注**: 10 筹码
- **发牌**: 每人 3 张牌

### 牌型大小（从大到小）
1. **豹子**: 三张相同（AAA > KKK > ... > 222）
2. **顺金**: 同花顺（AKQ > ... > 234）
3. **金花**: 同花（比较最大牌）
4. **顺子**: 顺序（AKQ > ... > 234）
5. **对子**: 两张相同（比较对子大小，再比较单牌）
6. **散牌**: 比较最大牌，依次比较

### 操作说明
- **看牌**: 查看自己的手牌
- **跟注**: 跟上当前下注额
- **加注**: 增加下注额
- **比牌**: 与下一个玩家比较牌型
- **弃牌**: 放弃本局游戏

## 🚀 快速开始

### 1. 安装依赖

```bash
cd server
npm install
```

### 2. 启动服务器

```bash
cd server
npm start
```

服务器启动后会显示：
```
🎮 炸金花游戏服务器启动在端口 8080
📡 等待玩家连接...

🌐 局域网地址: ws://192.168.x.x:8080
🏠 本地地址: ws://localhost:8080
```

### 3. 启动客户端

#### 方法一：直接打开 HTML 文件
```bash
# 在浏览器中打开
open client/index.html
```

#### 方法二：使用 HTTP 服务器（推荐）
```bash
cd client
python3 -m http.server 8000
```

然后在浏览器中访问 `http://localhost:8000`

### 4. 连接游戏

1. 输入你的昵称
2. 输入服务器地址（本机测试用 `ws://localhost:8080`）
3. 点击"加入游戏"

### 5. 开始游戏

1. 创建房间或加入现有房间
2. 等待其他玩家加入
3. 所有玩家点击"准备"
4. 房主点击"开始游戏"

## 🌐 局域网联机

### 服务器端
1. 启动服务器后，记录显示的局域网 IP 地址
2. 确保防火墙允许 8080 端口

### 客户端
1. 在同一局域网内的其他设备上打开客户端
2. 输入服务器的局域网 IP 地址（如 `ws://192.168.1.100:8080`）
3. 连接并开始游戏

## 📁 项目结构

```
poker/
├── server/                 # 服务器端
│   ├── server.js          # WebSocket 服务器
│   ├── game-logic.js      # 游戏核心逻辑
│   ├── room-manager.js    # 房间管理
│   └── package.json       # 依赖配置
│
├── client/                 # 客户端
│   ├── index.html         # 游戏页面
│   ├── style.css          # 样式文件
│   └── game.js            # 客户端逻辑
│
└── README.md              # 项目说明
```

## 🛠️ 技术栈

- **后端**: Node.js + WebSocket (ws)
- **前端**: HTML + CSS + JavaScript (原生)
- **通信**: WebSocket 实时双向通信

## 🎯 游戏流程

1. **连接服务器** → 进入大厅
2. **创建/加入房间** → 等待其他玩家
3. **所有玩家准备** → 房主开始游戏
4. **发牌** → 玩家依次操作
5. **比牌/弃牌** → 决出胜负
6. **结算** → 显示结果

## 📝 注意事项

- 确保服务器和客户端在同一局域网内
- 服务器默认端口为 8080，可在 `server.js` 中修改
- 建议使用现代浏览器（Chrome、Firefox、Safari、Edge）
- 移动端也可以正常游玩

## 🐛 常见问题

**Q: 连接不上服务器？**
- 检查服务器是否正常运行
- 确认 IP 地址和端口是否正确
- 检查防火墙设置

**Q: 游戏中断线了怎么办？**
- 刷新页面重新连接
- 玩家会自动从房间中移除

**Q: 如何修改初始筹码或底注？**
- 在 `server/room-manager.js` 中修改 `baseChips` 和 `ante` 的值

## 📄 开源协议

MIT License

## 🎉 开始游戏吧！

祝你好运，玩得开心！🍀
